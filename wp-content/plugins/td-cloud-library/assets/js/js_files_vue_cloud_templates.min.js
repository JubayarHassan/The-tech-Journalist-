window.tdbCloudTemplatesVue={};
window.tdbCloudTemplatesVue.modal={template:'<div class="tdb-s-modal-wrap">\n            <div class="tdb-s-modal-bg"></div>\n\n            <div class="tdb-s-modal">\n                <div class="tdb-s-modal-header">\n                    <slot name="header"></slot>\n                </div>\n                \n                <div class="tdb-s-modal-body">\n                    <slot name="body"></slot>\n                </div>\n                \n                <div class="tdb-s-modal-footer">\n                    <slot name="footer"></slot>\n                </div>\n            </div>\n        </div>',props:{title:{type:String,
default:""}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};
window.tdbCloudTemplatesVue.error={template:'\n            <div class="tdb-error-wrap">                                   \n                <div class="tdb-error-alert">\n                    <span class="tdb-error-message">{{errorsToDisplay[0].message}}</span>\n                    <span class="tdb-error-open-extra" @click.prevent="showExtra = !showExtra">\n                        <template v-if="showExtra === false">+</template>\n                        <template v-else>-</template>\n                    </span>\n                    <div v-show="showExtra" class="tdb-error-extra" style="overflow: auto;">\n                        <div v-for="(error, index) in errorsToDisplay" :key="\'extra_error_\' + index" class="tdb-error-extra-single" @click.prevent="switchDebugDisplay(\'extra_error_\' + index)">\n                            <div>{{error.type}}: {{error.message}}</div>                            \n                            <div class="tdb-error-debug-data" v-show="debugDisplay[\'extra_error_\' + index]"><pre>{{error.debug_data}}</pre></div>\n                        </div>                        \n                    </div>\n                </div>\n            </div>',props:{errorsToDisplay:{default:null}},
data:function(){return{showExtra:!1,debugDisplay:null}},created:function(){this.setDebugDisplay()},methods:{setDebugDisplay:function(){if(null===this.errorsToDisplay)this.debugDisplay=null;else{var b={};this.errorsToDisplay.forEach(function(a,c,d){b["extra_error_"+c]=!1});this.debugDisplay=b}},switchDebugDisplay:function(b){this.debugDisplay[b]=!this.debugDisplay[b]}},watch:{errorsToDisplay:function(){this.setDebugDisplay()}}};
window.tdbCloudTemplatesVue.templates_card={template:'<div class="tdb-s-template-type-body">\n            <div v-if="templatesCardData.templates.length" :class="[ \'tdb-templates\', \'tdb-s-content\', { \'tdb-s-content-loading\' : loading } ]">\n                <div class="tdb-templates-header">\n                    <div class="tdb-templates-header-item tdb-templates-header-item-name">\n                        <span>Cloud Templates</span>\n                    </div>\n                    <div v-if="\'page\' !== template_type && \'homepage\' !== template_type" class="tdb-templates-header-item tdb-templates-header-item-global">\n                        <span>Global</span>\n                    </div>\n                    <div v-if="\'homepage\' === template_type" class="tdb-templates-header-item tdb-templates-header-item-frontpage">\n                        <span>Front Page</span>\n                    </div>\n                    <div v-if="\'header\' !== template_type && \'footer\' !== template_type" class="tdb-templates-header-item tdb-templates-header-item-mobile">\n                        <span>Mobile Template</span>\n                    </div>\n                </div>\n                <div v-for="template in templatesCardData.templates" :class="[ \'tdb-template-el\', { \'tdb-template-el-renaming\' : templatesNameEditing[\'tpl_name_edit_\' + template.ID] }, { \'tdb-template-el-renaming-saving\' : templatesNameSaving[\'tpl_name_edit_saving_\' + template.ID] } ]">\n                    <div class="tdb-template-el-title">\n                        <template v-if="templatesNameEditing[\'tpl_name_edit_\' + template.ID]">\n                            <input\n                                :id="\'tpl_name_edit_\' + template.ID"\n                                v-model="editedTplName"\n                                :ref="\'tpl_name_edit_\' + template.ID"\n                                @keyup.enter="saveTemplateRename(template)"\n                                @keydown.esc="cancelTemplateRename(template)"\n                                :placeholder="template.post_title"\n                                class="tdb-template-el-title-input"\n                            >\n                            <div class="tdb-template-el-title-btns">\n                                <i @click="saveTemplateRename(template)" class="tdb-template-el-title-save td-icon-check" title="Save"></i>\n                                <i @click="cancelTemplateRename(template)" class="tdb-template-el-title-cancel td-icon-modal-close" title="Cancel"></i>\n                            </div>\n                        </template>\n                        <template v-else>\n                            <span :title="template.post_title">{{template.post_title}}</span>\n                        </template>\n                    </div>\n                    <div class="tdb-template-el-wrap">\n                        <div class="tdb-template-el-icon">\n                            <div class="tdb-template-el-options">\n                                <div title="Edit template with tagDiv Composer" class="tdb-template-el-edit-composer">\n                                    <a :href="getTdcEditLink(template)" target="_blank">Edit with TD Composer</a>\n                                </div>\n                                <div title="Edit template" class="tdb-template-el-edit">\n                                    <a :href="template.edit_link" target="_blank">Edit</a>\n                                </div>\n                                <div v-if="template.view_link" title="View template" class="tdb-template-el-view">\n                                    <a :href="template.view_link" target="_blank">View</a>\n                                </div>\n                                <div title="Rename template" class="tdb-template-el-rename" @click="templateRename(template)">Rename</div>\n                                <div title="Duplicate template" class="tdb-template-el-duplicate" @click="templateDuplicate(template)">Duplicate</div>\n                                <div title="Delete template" class="tdb-template-el-delete" @click="templateDelete(template.ID)">Delete</div>\n                            </div>\n                        </div>\n                    </div>\n                    <div v-if="\'page\' !== template_type" class="tdb-template-el-global">\n                        <input type="checkbox" :class="[ \'tdb-template-el-global-input\', { \'tdb-template-el-global-input-checked\' : templatesCardData.global_tpl === template.ID }]">\n                        <label @click.prevent="setGlobalTpl(template.ID)"></label>\n                        <span class="tdb-template-el-global-checked">Global</span>\n                    </div>\n                    <div v-if="\'header\' !== template_type && \'footer\' !== template_type" class="tdb-template-el-mobile-wrap">\n                        <span v-if="template.mobile_tpl_id" class="tdb-template-el-mobile">\n                            <span class="tdb-template-el-mobile-active">Yes</span>\n                        </span>\n                        <span v-else class="tdb-template-el-mobile">-</span>\n                        <div class="tdb-template-el-mobile-btns">\n                            <div title="Optional - New mobile template" class="tdb-template-el-mobile-btn tdb-template-el-mobile-blank tdb-create-mobile-template" @click="addMobileTpl(template.ID)"></div>\n                            <div title="Load mobile template from TagDiv Cloud Library" class="tdb-template-el-mobile-btn tdb-template-el-mobile-import tdb-load-mobile-template" @click="cloudLibraryImport(template.ID)"></div>\n                            <div id="tdb-mobile-templates" class="tdb-template-el-mobile-list">\n                                <div class="tdb-template-el-mobile-list-inner">\n                                    <div :class="[ \'tdb-template-el-mobile-list-el\', { \'tdb-current\' : template.mobile_tpl_id === \'\' } ]">\n                                        <div class="tdb-template-el-mobile-list-title" @click="setMobileTpl(template.ID,\'\')">No mobile template</div>\n                                    </div>\n                                    <div v-for="mobile_tpl in templatesCardData.mobile_templates" :class="[ \'tdb-template-el-mobile-list-el\', { \'tdb-current\' : template.mobile_tpl_id === mobile_tpl.tpl_id } ]">\n                                        <div class="tdb-template-el-mobile-list-title" :title="mobile_tpl.tpl_title" @click="setMobileTpl(template.ID,mobile_tpl.tpl_id)">\n                                            {{ mobile_tpl.tpl_title }}\n                                        </div>\n                                        <a class="tdb-template-el-mobile-list-edit" title="Edit mobile template with tagDiv Composer" :href="mobile_tpl.tpl_tdc_url" target="_blank"></a>\n                                        <div class="tdb-template-el-mobile-list-delete" title="Delete mobile template" @click="templateDelete(mobile_tpl.tpl_id, true)"></div>\n                                    </div>\n                                </div>\n                                <div class="tdb-template-el-mobile-list-separator" style="height: 1px;width: 100%;background-color: #ebebeb;margin: 10px 0;"></div>\n                                <a href="https://tagdiv.com/newspaper-10-3-7-update-brings-customizable-and-fast-mobile-pages/" target="_blank" class="tdb-template-el-mobile-list-no-el">Documentation \u00bb</a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \x3c!-- reload tpl card data btn --\x3e\n                \x3c!--<div @click="getTemplateCardData()" style="max-width: 100px; background-color: #2aabee; font-size: 10px; color: white; margin: 0 auto; text-align: center; cursor: pointer;">reload tpl card data</div>--\x3e\n                \x3c!-- errors --\x3e\n                <div class="tdb-s-template-type-errors" v-if="errors.length">\n                    <div v-for="error in errors" :class="[\'tdb-s-notif\', \'tdb-s-notif-xxsm\', \'tdb-s-notif-\' + error.type]">\n                        <div class="tdb-s-notif-descr">{{ error.message }}</div>\n                    </div>\n                </div>\n            </div>\n            <div v-else class="tdb-templates tdb-no-templates-notif">\n                No cloud templates. Please import one or more templates from <b>Cloud Library</b>.\n            </div>\n            \n            \x3c!-- new mobile tpl modal --\x3e\n            <modal v-if="showMobileTplModal">\n                <template slot="header">\n                    <h3 class="tdb-s-modal-title">Create Mobile Template</h3>\n                    <svg class="tdb-s-modal-close" @click="showMobileTplModal = false" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14">\n                        <g transform="translate(-5 -5)">\n                            <path d="M0,13a1,1,0,0,1-.707-.293,1,1,0,0,1,0-1.414l12-12a1,1,0,0,1,1.414,0,1,1,0,0,1,0,1.414l-12,12A1,1,0,0,1,0,13Z" transform="translate(6 6)"/>\n                            <path d="M12,13a1,1,0,0,1-.707-.293l-12-12a1,1,0,0,1,0-1.414,1,1,0,0,1,1.414,0l12,12A1,1,0,0,1,12,13Z" transform="translate(6 6)"/>\n                        </g>\n                    </svg>\n                </template>\n                \n                <template slot="body">\n                    <div class="tdb-s-form tdb-s-new-mob-template-form">\n                        <div class="tdb-s-form-content">\n                            <div class="tdb-s-fc-inner">\n                                <div class="tdb-s-form-group tdb-s-form-group-sm tdb-s-form-group-name">\n                                    <label class="tdb-s-form-label" for="tdb-new-template-name">Name</label>\n                                    <input class="tdb-s-form-input" id="tdb-new-template-name" type="text" v-model="newMobileTplName">\n                                </div>\n                                <div class="tdb-s-form-group tdb-s-form-group-sm tdb-s-form-group-content">\n                                    <div class="tdb-s-form-check">\n                                        <label for="tdb-copy-content">\n                                            <input type="checkbox" id="tdb-copy-content" v-model="copyContent">\n                                            <span class="tdb-s-fc-check"></span>\n                                            <span class="tdb-s-fc-title">Copy content</span>\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </template>\n                \n                <template slot="footer">\n                    <button class="tdb-s-btn tdb-s-btn-sm tdb-s-btn-hollow" @click="cancelAddNewMobTpl">Cancel</button>\n                    <button class="tdb-s-btn tdb-s-btn-sm" @click="addMobileTpl(template)">Create</button>\n                </template>\n            </modal>\n            \n        </div>',props:{templates_card_data:{type:Object,
required:!0},template_type:{type:String,required:!0}},data:function(){return{errors:[],templatesCardData:[],templateType:"",templatesCardDataId:"",loading:!1,templatesNameEditing:null,templatesNameSaving:null,editedTplName:"",showMobileTplModal:!1,template:"",newMobileTplName:"",copyContent:!1}},created:function(){var b=this;b.templatesCardData=this.templates_card_data;b.templatesCardDataId=this.templates_card_data.tpl_card_data_assets.card_tpl_data_id;b.templateType=this.template_type;b.setTemplateNameEditDisplay();
var a="tdb_ct_tpl_card_data_update_"+b.templateType;jQuery("body").on(a,function(a,d){b.getTemplateCardData()})},methods:{getTemplateCardData:function(){var b=this;b.loading=!0;b.errors=[];jQuery.ajax({url:td_ajax_url,type:"post",data:{action:"tdb_ct_get_tpl_card_data",_nonce:window.tdb_globals.wpRestNonce,tpl_type:b.templateType},success:function(a){a=JSON.parse(a);"undefined"!==typeof a.templates?(b.templatesCardData=a,b.templatesCardDataId=a.tpl_card_data_assets.card_tpl_data_id):b.errors.push({type:a.type,
message:"tpl card data update error: "+a.msg});b.loading=!1},error:function(a,b,d){console.log("%c"+d,"color: #dc2121c7")}})},cloudLibraryImport:function(b){var a="page"===this.templateType||"homepage"===this.templateType?"page":this.templateType;b={wp_type:a,force_parent_template_type:a,hide_mobile_selector:"hide",install_template_route:"addRoute",assign_mobile_to_template:b.toString()};switch(this.templateType){case "page":b.templateType="Pages";break;case "homepage":b.templateType="Homepages"}window.tdbVue.router.push({name:"loadRoute",
params:b})},getTdcEditLink:function(b){var a="page"===this.templateType||"homepage"===this.templateType?"page":this.templateType,c=window.tdb_globals.wpAdminUrl,d=encodeURIComponent(window.location);return this.templatesCardDataId?c+"post.php?post_id="+b.ID+"&td_action=tdc&tdbLoadDataFromId="+this.templatesCardDataId+"&tdbTemplateType="+a+"&prev_url="+d:c+"post.php?post_id="+b.ID+"&td_action=tdc&tdbTemplateType="+a+"&prev_url="+d},setGlobalTpl:function(b){var a=this;a.loading=!0;a.errors=[];var c=
"";switch(a.templateType){case "single":case "header":case "footer":case "404":case "attachment":case "author":case "date":case "tag":case "search":case "woo_product":case "woo_shop_base":case "woo_search_archive":case "homepage":c="tdb_assign_"+a.templateType+"_template_global";break;case "category":c="tdb_assign_cat_template_global";break;case "woo_archive":c="tdb_set_woo_archive_template_global"}""!==c&&jQuery.ajax({type:"post",url:td_ajax_url,data:{action:c,_nonce:window.tdb_globals.wpRestNonce,
template_id:b},success:function(b){"undefined"!==typeof JSON.parse(b).global_template_id?a.getTemplateCardData():(a.errors.push({type:"error",message:"tpl card set global tpl error: missing template id or invalid nonce"}),a.loading=!1)},error:function(a,b,c){console.log("%c"+c,"color: #dc2121c7")}})},addMobileTpl:function(b){var a=this;a.errors=[];void 0!==b&&(a.template=b);a.showMobileTplModal?a.template&&jQuery.ajax({type:"post",url:td_ajax_url,data:{action:"tdb_create_mobile_template",template_id:a.template,
template_title:a.newMobileTplName,template_type:"page"===a.templateType||"homepage"===a.templateType?"page":a.templateType,copyContent:a.copyContent?"1":"0",_nonce:window.tdb_globals.wpRestNonce},success:function(b){b=JSON.parse(b);"undefined"!==typeof b.mobile_template_id?(a.cancelAddNewMobTpl(),a.getTemplateCardData(),"page"===a.templateType?jQuery("body").trigger("tdb_ct_tpl_card_data_update_homepage"):"homepage"===a.templateType&&jQuery("body").trigger("tdb_ct_tpl_card_data_update_page")):(a.errors.push({type:b.type,
message:"tpl card create mobile tpl error: "+b.msg}),a.cancelAddNewMobTpl())},error:function(a,b,e){console.log("%c"+e,"color: #dc2121c7")}}):a.showMobileTplModal=!0},setMobileTpl:function(b,a){var c=this;c.errors=[];jQuery.ajax({type:"post",url:td_ajax_url,data:{action:"tdb_set_mobile_template",template_id:b,mobile_template_id:a,_nonce:window.tdb_globals.wpRestNonce},success:function(a){a=JSON.parse(a);_.isObject(a)&&!_.isUndefined(a.result)&&1===a.result?c.getTemplateCardData():c.errors.push({type:a.type,
message:"tpl card set mobile template error: "+a.msg})},error:function(a,b,c){console.log("%c"+c,"color: #dc2121c7")}})},cancelAddNewMobTpl:function(){this.newMobileTplName=this.template="";this.copyContent=this.showMobileTplModal=!1},setTemplateNameEditDisplay:function(){var b={},a={};this.templatesCardData.templates.length&&(this.templatesCardData.templates.forEach(function(c,d){b["tpl_name_edit_"+c.ID]=!1;a["tpl_name_edit_saving_"+c.ID]=!1}),this.templatesNameEditing=b,this.templatesNameSaving=
a)},templateRename:function(b){var a=this;a.errors=[];a.templatesNameEditing["tpl_name_edit_"+b.ID]=!a.templatesNameEditing["tpl_name_edit_"+b.ID];a.editedTplName=b.post_title;a.$nextTick(function(){Object.entries(a.templatesNameEditing).forEach(function(b){b[1]&&"undefined"!==typeof a.$refs[b[0]][0]&&a.$refs[b[0]][0].focus()})})},saveTemplateRename:function(b){var a=this;a.editedTplName!==b.post_title?(a.templatesNameSaving["tpl_name_edit_saving_"+b.ID]=!a.templatesNameSaving["tpl_name_edit_saving_"+
b.ID],jQuery.ajax({url:td_ajax_url,type:"post",data:{action:"tdb_change_template_name",template_id:b.ID,template_title:a.editedTplName,_nonce:window.tdb_globals.wpRestNonce},success:function(c){c=JSON.parse(c);"undefined"!==typeof c.template_id?(b.post_title=a.editedTplName,a.templatesNameSaving["tpl_name_edit_saving_"+b.ID]=!a.templatesNameSaving["tpl_name_edit_saving_"+b.ID],a.templatesNameEditing["tpl_name_edit_"+b.ID]=!a.templatesNameEditing["tpl_name_edit_"+b.ID]):a.errors.push({type:c.type,
message:"tpl card change template name error: "+c.msg})},error:function(a,b,e){console.log("%c"+e,"color: #dc2121c7")}})):a.cancelTemplateRename(b)},cancelTemplateRename:function(b){this.templatesNameEditing["tpl_name_edit_"+b.ID]=!this.templatesNameEditing["tpl_name_edit_"+b.ID]},blur:function(b){b.target.blur()},templateDuplicate:function(b){var a=this,c="page"===a.templateType||"homepage"===a.templateType?"page":a.templateType;a.errors=[];tdbApi.run({wpNonce:window.tdb_globals.wpRestNonce,cloudEndPoint:"td-cloud-library/new_template",
post:{postId:b.ID,templateType:c,templateName:b.post_title,duplicateTemplate:!0},done:function(b){"undefined"!==typeof b.template_id?a.getTemplateCardData():a.errors.push({type:"error",message:"tpl card duplicate template error: "+b.error})},error:function(a){console.log("td-cloud-library/new_template ( duplicate template ) - ERROR",a)}})},templateDelete:function(b,a){a=void 0===a?!1:a;var c=this;c.errors=[];jQuery.ajax({type:"POST",url:td_ajax_url,data:{action:"tdb_delete_template",template_id:b,
_nonce:window.tdb_globals.wpRestNonce},success:function(b){b=JSON.parse(b);"undefined"!==typeof b.template_id?(c.getTemplateCardData(),a&&("page"===c.templateType?jQuery("body").trigger("tdb_ct_tpl_card_data_update_homepage"):"homepage"===c.templateType&&jQuery("body").trigger("tdb_ct_tpl_card_data_update_page"))):c.errors.push({type:b.type,message:"tpl card delete template error: "+b.msg})},error:function(a,b,c){console.log("%c"+c,"color: #dc2121c7")}})}},watch:{templatesCardData:function(){this.setTemplateNameEditDisplay()}},
components:{modal:window.tdbCloudTemplatesVue.modal}};
window.tdbCloudTemplatesVue.templates={template:'<div class="tdb-s-page tdb-s-page-templates-list">\n            <div class="tdb-s-page-content">\n                <div class="tdb-s-page-inner">\n                    <div class="tdb-s-page-sec">\n                    \n                        \x3c!-- header --\x3e\n                        <div class="tdb-s-page-sec-header">\n                            <h2 class="tds-spsh-title">Header and Footer Templates</h2>\n                        </div>\n                    \n                        \x3c!-- templates --\x3e\n                        <div :class="[\'tdb-s-page-sec-content\', \'tdb-s-content\', { \'tdb-s-content-loading\' : !templatesReady} ]">\n                            <template v-if="templatesReady">\n                                \x3c!-- errors --\x3e\n                                <div class="errors" v-if="errors.length" style="margin-bottom: 20px; color: orangered;">\n                                    <div v-for="error in errors">\n                                        <div :class="\'type-\' + error.type">{{ error.msg }}</div>\n                                    </div>\n                                </div>\n                                <div v-if="Object.keys(cloudTemplates).length" class="tdb-s-template-types">\n                                    <template v-for="(data, template_type) in cloudTemplates">\n                                        <h3 v-if="template_type === \'a_404\'" class="tdb-s-template-types-title">WordPress Templates</h3>\n                                        <h3 v-if="template_type === \'homepage\'" class="tdb-s-template-types-title">Page Templates</h3>\n                                        <h3 v-if="template_type === \'woo_product\'" class="tdb-s-template-types-title">Shop Templates</h3>\n                                        <template>\n                                            <div :class="[\'tdb-s-template-type\', \'tdb-s-template-type_\' + template_type]">\n                                                <div class="tdb-s-template-type-header">\n                                                    <h4 class="tdb-s-tth-title">{{ getTplCardHeader(template_type) }} templates</h4>\n                                                    <div class="tdb-s-tth-new" title="Import from Cloud Library" @click="cloudLibraryImport(template_type)">\n                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus">\n                                                            <line x1="12" y1="5" x2="12" y2="19"></line>\n                                                            <line x1="5" y1="12" x2="19" y2="12"></line>\n                                                        </svg>\n                                                    </div>\n                                                </div>\n                                                <templates-card :templates_card_data="data" :template_type="template_type === \'a_404\' ? \'404\' : template_type"></templates-card>\n                                            </div>\n                                        </template>\n                                    </template>\n                                </div>\n                                <div v-else class="tdb-notif tdb-notif-info">\n                                    <div class="tdb-notif-descr">No cloud templates found!</div>\n                                </div>\n                            </template>\n                        </div>\n                        \n                    </div>\n                </div>\n            </div>\n        </div>',data:function(){return{errors:[],
templatesReady:!1,cloudTemplates:[],showMobileTplModal:!1}},created:function(){this.getCloudTemplates()},methods:{getCloudTemplates:function(){var b=this;jQuery.ajax({url:td_ajax_url,type:"post",data:{action:"tdb_ct_get_all",_nonce:window.tdb_globals.wpRestNonce},success:function(a){a=JSON.parse(a);"undefined"!==typeof a.templates?(b.cloudTemplates=a.templates,console.log("getCloudTemplates reply: ",a.templates)):b.errors.push({type:"error",msg:"Error, no templates data received from server."});b.templatesReady=
!0},error:function(a,b,d){console.log("%c"+d,"color: #dc2121c7")}})},getTplCardHeader:function(b){b=("a_404"===b?"404":b).replaceAll("_"," ");return b.charAt(0).toUpperCase()+b.slice(1)},cloudLibraryImport:function(b){b="a_404"===b?"404":b;var a={wp_type:b,force_parent_template_type:b,hide_mobile_selector:"hide",install_template_route:"addRoute"};switch(b){case "single":a.assign_to_post="";break;case "category":a.assign_to_category="";break;case "404":a.assign_to_404="";break;case "archive":a.assign_to_archive=
"";break;case "search":a.assign_to_search="";break;case "attachment":a.assign_to_attachment="";break;case "author":a.assign_to_author="";break;case "tag":a.assign_to_tag="";break;case "page":a.templateType="Pages";break;case "homepage":a.templateType="Homepages"}window.tdbVue.router.push({name:"loadRoute",params:a})}},watch:{},components:{"templates-card":window.tdbCloudTemplatesVue.templates_card}};
window.tdbCloudTemplatesVue.templates_trash={template:'<div class="tdb-s-page tdb-s-page-templates-trash-list">\n            <div class="tdb-s-page-content">\n                <div class="tdb-s-page-inner">\n                    <div class="tdb-s-page-sec">\n                    \n                        \x3c!-- header --\x3e\n                        <div class="tdb-s-page-sec-header tdb-spsh-row">\n                            <div class="tdb-spsh-col">\n                                <h2 class="tds-spsh-title">Trash</h2>\n                            </div>\n                            <div class="tdb-spsh-col">\n                                \x3c!-- delete all button --\x3e\n                                <button class="tdb-s-btn tdb-s-btn-sm" @click.prevent="deleteAll" :disabled="!templatesReady || !templates.length">Delete all</button>\n                            </div>\n                        </div>\n                            \n                        \x3c!-- templates --\x3e\n                        <div :class="[\'tdb-s-page-sec-content\', \'tdb-s-content\', { \'tdb-s-content-loading\' : !templatesReady} ]">\n                            <template v-if="templatesReady">\n                                \x3c!-- errors --\x3e\n                                <div class="errors" v-if="errors.length" style="margin-bottom: 20px; color: orangered;">\n                                    <div v-for="error in errors">\n                                        <div :class="\'type-\' + error.type">{{ error.msg }}</div>\n                                    </div>\n                                </div>\n                                <table v-if="templates.length" class="tdb-s-table tdb-s-table-trash">\n                                    <thead class="tdb-s-table-header">\n                                        <tr class="tdb-s-table-row tdb-s-table-row-h">\n                                            <th class="tdb-s-table-col">Template title</th>\n                                            <th class="tdb-s-table-col">Template type</th>\n                                            <th class="tdb-s-table-col"></th>\n                                        </tr>\n                                    </thead>\n                                    <tbody class="tdb-s-table-body">\n                                        <tr v-for="(template, index) in templates" class="tdb-s-table-row">\n                                            <td class="tdb-s-table-col">\n                                                <div class="tds-s-table-col-label">Template title</div>\n                                                {{ template.post_title }}\n                                            </td>\n                                            <td class="tdb-s-table-col">\n                                                <div class="tds-s-table-col-label">Template type</div>\n                                                {{ template.tpl_type }}\n                                            </td>\n                                            <td class="tdb-s-table-col tdb-s-table-col-options">\n                                                <svg class="tdb-s-table-options-toggle" xmlns="http://www.w3.org/2000/svg" width="4.001" height="16" viewBox="0 0 4.001 16"><g transform="translate(-1210.999 -335)"><path d="M-10898,14a2,2,0,0,1,2-2,2,2,0,0,1,2,2,2,2,0,0,1-2,2A2,2,0,0,1-10898,14Zm0-6a2,2,0,0,1,2-2,2,2,0,0,1,2,2,2,2,0,0,1-2,2A2,2,0,0,1-10898,8Zm0-6a2,2,0,0,1,2-2,2,2,0,0,1,2,2,2,2,0,0,1-2,2A2,2,0,0,1-10898,2Z" transform="translate(12109 335)"/></g></svg>\n                                                <div class="tdb-s-table-options-list">\n                                                    <div class="tdb-s-tol-item" @click="templateRestore(template.ID)">Restore</div>\n                                                    <div class="tdb-s-tol-sep"></div>\n                                                    <div class="tdb-s-tol-item tdb-s-tol-item-red" @click="templatePermDelete(template.ID)">Delete permanently</div>\n                                                </div>\n                                            </td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                                <div v-else class="tdb-s-notif tdb-s-notif-info">\n                                    <div class="tdb-s-notif-descr">No trashed cloud templates found!</div>\n                                </div>\n                            </template>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>',data:function(){return{errors:[],
templatesReady:!1,templates:[],msg:""}},created:function(){this.getTrashedCloudTemplates()},methods:{getTrashedCloudTemplates:function(){var b=this;jQuery.ajax({url:td_ajax_url,type:"post",data:{action:"tdb_ct_get_all_trashed",_nonce:window.tdb_globals.wpRestNonce},success:function(a){a=JSON.parse(a);void 0!==a.templates?(b.templates=a.templates,console.log("getTrashedCloudTemplates reply: ",a.templates)):b.errors.push({type:"error",msg:"Error, no trashed templates data received from server."});b.templatesReady=
!0},error:function(a,b,d){console.log("%c"+d,"color: #dc2121c7")}})},templateRestore:function(b){var a=this;a.errors=[];jQuery.ajax({url:td_ajax_url,type:"post",data:{action:"tdb_restore_tpl",template_id:b,_nonce:window.tdb_globals.wpRestNonce},success:function(b){b=JSON.parse(b);console.log("templateRestore reply: ",b);void 0!==b.restored_tpl_id?a.getTrashedCloudTemplates():a.errors.push(b)},error:function(a,b,e){console.log("%c"+e,"color: #dc2121c7")}})},templatePermDelete:function(b){var a=this;
a.errors=[];jQuery.ajax({url:td_ajax_url,type:"post",data:{action:"tdb_perm_delete_tpl",template_id:b,_nonce:window.tdb_globals.wpRestNonce},success:function(b){b=JSON.parse(b);console.log("templatePermDelete reply: ",b);void 0!==b.deleted_tpl_id?a.getTrashedCloudTemplates():a.errors.push(b)},error:function(a,b,e){console.log("%c"+e,"color: #dc2121c7")}})},deleteAll:function(){var b=this;b.errors=[];jQuery.ajax({url:td_ajax_url,type:"post",data:{action:"tdb_trashed_templates_delete_all",_nonce:window.tdb_globals.wpRestNonce},
success:function(a){a=JSON.parse(a);console.log("deleteAll reply: ",a);void 0!==a.deleted_templates?(b.templates=[],b.msg=a.deleted_templates+" templates deleted !"):b.errors.push(a)},error:function(a,b,d){console.log("%c"+d,"color: #dc2121c7")}})}},watch:{},components:{}};
window.tdbCloudTemplatesVue.index={template:'<div class="tdb-settings-inner">\n            <router-view></router-view>\n        </div>',props:{},data:function(){return{}},created:function(){window.tdbCloudTemplatesVue.router.push({name:"templatesRoute"});jQuery(".nav-tab-wrapper.cloud-templates .nav-tab[data-route='templates']").addClass("nav-tab-active")},mounted:function(){this.$nextTick(function(){jQuery(".nav-tab-wrapper.cloud-templates .nav-tab").on("click",function(b){b.preventDefault();b=jQuery(this);
var a=b.data("route");"undefined"!==typeof a&&(window.tdbCloudTemplatesVue.router.push({name:a+"Route"}),b.siblings().removeClass("nav-tab-active"),b.addClass("nav-tab-active"))})})},methods:{},watch:{},components:{templates:window.tdbCloudTemplatesVue.templates},beforeRouteUpdate:function(b,a,c){c()}};
window.tdbCloudTemplatesVue.routes=[{path:"/",component:window.tdbCloudTemplatesVue.index,name:"indexRoute",children:[{path:"/templates",component:window.tdbCloudTemplatesVue.templates,name:"templatesRoute",props:!0},{path:"/trash",component:window.tdbCloudTemplatesVue.templates_trash,name:"trashRoute",props:!0}]}];
(function(){if("undefined"!==typeof window.tdbCloudTemplatesVue.extraRoutes){var b=window.tdbCloudTemplatesVue.extraRoutes;b.constructor===Array&&0<b.length&&b.forEach(function(a,b,d){if("string"===typeof a.path&&"string"===typeof a.name){b={path:a.path,name:a.name};if("string"===typeof a.component)b.component=window.tdbCloudTemplatesVue[a.component];else if("object"===typeof a.components){d={};for(var c in a.components)d[c]=window.tdbCloudTemplatesVue[a.components[c]];b.components=d}if("boolean"===
typeof a.props)b.props=a.props;else if("object"===typeof a.props){c={};for(var f in a.props)c[f]=a.props[f];b.props=c}window.tdbCloudTemplatesVue.routes[0].children.push(b)}})}window.tdbCloudTemplatesVue.routes.push({path:"*",redirect:{name:"indexRoute"}})})();window.tdbCloudTemplatesVue.router=new VueRouter({mode:"abstract",routes:window.tdbCloudTemplatesVue.routes});window.tdbCloudTemplatesVue.router.push({name:"indexRoute"});
window.tdbCloudTemplatesVue.router.beforeEach(function(b,a,c){var d=[];window.tdbCloudTemplatesVue.routes[0].children.forEach(function(a){d.push(a.name)});c()});
